{ 
  "meta:license":[ 
    "Copyright 2019 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id":"https://ns.adobe.com/xdm/context/profile-privacy",
  "$schema":"http://json-schema.org/draft-06/schema#",
  "title":"Privacy/Marketing Preferences (Consent)",
  "description":"This schema captures privacy, personalization and marketing preferences (consents).",
  "type":"object",
  "meta:extensible":true,
  "meta:abstract":true,
  "meta:intendedToExtend":[ 
    "https://ns.adobe.com/xdm/context/profile"
  ],
  "definitions":{ 
    "profile-privacy":{ 
      "properties":{ 
        "xdm:optOutConsentLevel":{ 
          "type":"object",
          "title":"Privacy/Marketing Preference Values",
          "description":"Privacy/Personalization/Marketing Preferences.",
          "ref": "https://ns.adobe.com/xdm/context/consentpreferences"
        },
        "xdm:identityPrivacyInfo":{
          "title": "Identity level privacy information",
          "description": "Captured privacy information for identities in profile.",
          "type": "object",
          "meta:xdmType": "map",
          "additionalProperties" : {
            "title": "User namespace",
            "type": "object",
            "meta:xdmType": "map",
            "additionalProperties": {
              "type": "object",
              "title": "User Identity",
              "properties": {
                "xdm:consentsAndPreferences":{
                  "title": "Device/Identity-specific Consents, Personalization and Marketing Preferences",
                  "ref": "https://ns.adobe.com/xdm/context/consentpreferences"
                },
                "xdm:identityIABConsent": {
                  "type": "object",
                  "title": "Identity level consent information",
                  "description": "Consent collected for an identity via consent management services.",
                  "properties": {
                    "xdm:consentTimestamp": {
                      "title": "Timestamp of consent",
                      "description": "Timestamp (RFC3339) when this identity presented consent information",
                      "type": "string",
                      "format": "date-time"
                    },
                    "xdm:consentString": {
                      "title": "Captured consent information",
                      "description": "Consent string and its specification. This can help reading application to use appropriate library.",
                      "$ref": "https://ns.adobe.com/xdm/context/consentstring"
                    }
                  },
                  "required": [
                    "xdm:consentTimestamp"
                  ]
                }
              }
            }
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "https://ns.adobe.com/xdm/common/extensible#/definitions/@context"
    },
    {
      "$ref": "#/definitions/profile-privacy"
    }
  ],
  "meta:status": "stable"
}
