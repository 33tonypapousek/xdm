{
  "meta:license": [
    "Copyright 2018 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id":
    "https://ns.adobe.com/experience/offer-management/offer-representation",
  "meta:abstract": false,
  "meta:extensible": true,
  "type": "object",
  "title": "Representation",
  "description": "Offer Representation",
  "definitions": {
    "offer-representation": {
      "properties": {
        "xdm:components": {
          "type": "array",
          "description": "The content components of the Offer Representation, including all their language variants. Specific components are found by 'dx:format', 'dc:subject' and 'dc:language' or a combination thereof. This metadata is used to locate or represent the content that is associated with an offer and integrate it according to the placement contract.",
          "items": {
            "$ref": "#/definitions/content-component"
          }
        },
        "xdm:channel": {
          "type": "string",
          "format": "uri",
          "title": "Channel",
          "description": "The channel constraint is used to convey not only where the offer will be used but determine the content editor or validator that is used for the Offer's representation. The value is a valid Channel URI. See 'https://ns.adobe.com/xdm/channels/channel'"
        },
        "xdm:placement": {
          "type": "string",
          "format": "uri",
          "title": "Placement",
          "description": "Placement to comply with. The value is the URI (@id) of the OfferPlacement that is referenced. See OfferPlacement schema https://ns.adobe.com/experience/offer-management/offer-placement"
        }
      },
      "required": [
        "xdm:components",
        "xdm:channel",
        "xdm:placement"
      ]
    },
    "content-component-type": {
      "type": "string",
      "format": "uri",
      "title": "Content Type",
      "description": "Content Type: image, html or plain text",
      "enum": [
        "https://ns.adobe.com/experience/offer-management/content-component-text",
        "https://ns.adobe.com/experience/offer-management/content-component-html",
        "https://ns.adobe.com/experience/offer-management/content-component-imagelink"
      ],
      "meta:enum": {
        "https://ns.adobe.com/experience/offer-management/content-component-text": "Text",
        "https://ns.adobe.com/experience/offer-management/content-component-html": "HTML",
        "https://ns.adobe.com/experience/offer-management/content-component-imagelink": "Image Link"
      }
    },
    "content-component": {
      "allOf": [
        {
          "type": "object",
          "description":
            "Content components are the fragments associated with the a particular offer representation. Those fragments are used to compose the end-user experience. The content resource has optional HAL links to the file resource.",
          "meta:extends": [
            "https://ns.adobe.com/xdm/external/hal/resource#/definitions/hal",
          ],
          "properties": {
            "@type": {
              "$ref": "#/definitions/content-component-type"
            },
            "dc:format": {
              "meta:usereditable": false,
              "type": "string",
              "title": "Format",
              "pattern": "\\w+\\/[-.\\w]+(?:\\+[-.\\w]+)?",
              "examples": ["application/vnd.adobe.photoshop"],
              "description":
                "The physical or digital manifestation of the resource. Typically, Format should include the media-type of the resource. Format may be used to determine the software, hardware or other equipment needed to display or operate the resource. Recommended best practice is to select a value from a controlled vocabulary (for example, the list of [Internet Media Types](http://www.iana.org/ assignments/media-types/) defining computer media formats)."
            },
            "dc:subject": {
                "title": "Subject",
                "type": "array",
                "items": {
                    "type": "string"
                },
                "description": "Set of descriptive phrases or keywords that describe the content of the resource. These keywords are part of the XMP metadata of the asset. Compare this with the `keyword` and `machineKeywords` properties, which provide more structure and context."
            },
            "dc:language": {
              "meta:usereditable": false,
              "type": "array",
              "title": "Language",
              "items": {
                "type": "string",
                "pattern":
                  "^(((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+)|((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$"
              },
              "description":
                "The language or languages of the resource.\nLanguages are specified in language code as defined in [IETF RFC 3066](https://www.ietf.org/rfc/rfc3066.txt), which is part of BCP 47, which is used elsewhere in XDM.",
              "examples": ["\n", "pt-BR", "es-ES"]
            },
            "repo:assetID": {
              "type": "string",
              "meta:immutable": true,
              "meta:usereditable": false,
              "description":
                "An optional unique identifier to locate the content asset in a content repository.",
              "examples": ["urn:aaid:sc:US:6dc33479-13ca-4b19-b25d-c805eff8a69e"]
            }
          },
          "required": ["@type","dc:format"]
        },
        {
          "type": "object",
          "description": "The component can have links with the reltype \"api:primary\" and \"api:metadata\" referencing the blob resource and additional metadata of the content/asset.",
          "properties": {
            "_links": {
              "$ref":"http://hyperschema.org/mediatypes/hal#/definitions/links"
            }
          }
        }
      ]
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/offer-representation"
    }
  ]
}

