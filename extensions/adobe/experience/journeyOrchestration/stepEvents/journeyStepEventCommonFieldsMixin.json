{
  "meta:license": [
    "Copyright 2020 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id": "https://ns.adobe.com/experience/journeyOrchestration/stepEvents/journeyStepEventCommonFields",
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Journey Orchestration Step veeent  Common Fields",
  "type": "object",
  "meta:extensible": true,
  "meta:abstract": true,
  "meta:intendedToExtend": [
    "https://ns.adobe.com/experience/journeyOrchestration/stepEvents/journeyStepEvent",
    "https://ns.adobe.com/xdm/context/experienceevent"
  ],
  "description": "This Mixin contains the common Jounney Metadata information ",
  "definitions": {
    "journeyStepEventCommonFields": {
      "properties": {
        "https://ns.adobe.com/experience/journeyOrchestration/stepEvents": {
          "title": "Journey Orchestration for creating user journey.",
          "type": "object",
          "properties": {
            "journey:entrance":{
              "title":"entrance",
              "description":"Indicate if the user has entered the journey. If not present, assuming that the value is false",
              "type":"boolean"
            },
            "journey:reentrance":{
              "title":"reentrance",
              "description":"Indicate if the user has reentered the journey with the same instance. If not present, assuming that the value is false",
              "type":"boolean"
            },
            "journey:instanceEnded":{
              "title":"instanceEnded",
              "description":"Indicate if the instance is ended (sucessfully or not)",
              "type":"boolean"
            },
            "journey:eventId":{
              "title":"eventId",
              "description":"Event id in processing, for the step processing",
              "type":"string"
            },
            "journey:nodeId":{
              "title":"nodeId",
              "description":"client node id",
              "type":"string"
            },
            "journey:stepId":{
              "title":"stepId",
              "description":"Unique id of the step that is currently in processing",
              "type":"string"
            },
            "journey:stepName":{
              "title":"stepName",
              "description":"Name of the step that is currently in processing",
              "type":"string"
            },
            "journey:stepType":{
              "title":"stepType",
              "description":"Type of the step",
              "type":"string"
            },
            "journey:stepStatus":{
              "title":"stepStatus",
              "description":"Status of the journey step, representing in which shape the step is, when its processing has been done",
              "type":"string"
            },
            "journey:journeyId":{
              "title":"journeyId",
              "description":"ID of the journey",
              "type":"string"
            },
            "journey:journeyVersionId":{
              "title":"journeyVersionId",
              "description":"ID of the journey version. This id represents the identity reference to the journey, in case of the journeyStepEvent",
              "type":"string"
            },
            "journey:journeyVersionName":{
              "title":"journeyVersionName",
              "description":"Name of the journey version",
              "type":"string"
            },
            "journey:journeyVersion":{
              "title":"journeyVersion",
              "description":"Version of the journey version",
              "type":"string"
            },
            "journey:instanceId":{
              "title":"instanceId",
              "description":"Internal ID of the journey instance",
              "type":"string"
            },
            "journey:externalKey":{
              "title":"externalKey",
              "description":"External key extracted from the event to process it",
              "type":"string"
            },
            "journey:parentStepId":{
              "title":"parentStepId",
              "description":"Step ID of the parent of the current processed step in the instance",
              "type":"string"
            },
            "journey:parentStepName":{
              "title":"parentStepName",
              "description":"Step name of the parent of the current step.",
              "type":"string"
            },
            "journey:parentTransitionId":{
              "title":"parentTransitionId",
              "description":"Id of the transition which has brought the instance to the processed step",
              "type":"string"
            },
            "journey:parentTransitionName":{
              "title":"parentTransitionName",
              "description":"Name of the transition which has brought the instance to the processed step",
              "type":"string"
            },
            "journey:inTest":{
              "title":"inTest",
              "description":"Whether this journey is in test mode or not",
              "type":"boolean"
            },
            "journey:processingTime":{
              "title":"processingTime",
              "description":"Total time in milliseconds from the instance step entrance to the end of the processing",
              "type":"integer"
            },
            "journey:instanceType":{
              "title":"instanceType",
              "description":"indicate the instance type, if it is batch or unitary",
              "type":"string"
            },
            "journey:recurrenceIndex":{
              "title":"recurrenceIndex",
              "description":"Index of the recurrence if the journey is batch and recurring (first run has recurrenceIndex = 1)",
              "type":"integer"
            },
            "journey:isBatchToUnitary":{
              "title":"isBatchToUnitary",
              "description":"Indicates if this unitary instance has been triggered from a batch instance",
              "type":"boolean"
            },
            "journey:batchExternalKey":{
              "title":"batchExternalKey",
              "description":" External Key for batch event",
              "type":"string"
            },
            "journey:batchInstanceId":{
              "title":"batchInstanceId",
              "description":" this is the batch instance id",
              "type":"string"
            },
            "journey:batchUnitaryBranchId":{
              "title":"batchUnitaryBranchId",
              "description":"If the instance has been triggered from a batch instance, unitary branch id",
              "type":"string"
            }
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/journeyStepEventCommonFields"
    }
  ],
  "meta:status": "experimental"
}