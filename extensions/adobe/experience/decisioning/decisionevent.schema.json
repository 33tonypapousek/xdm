{
  "meta:license": [
    "Copyright 2017 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id": "https://ns.adobe.com/experience/decisioning/decisionevent",
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "DecisionEvent",
  "type": "object",
  "description": "A DecisionEvent is used to capture observations about the outcome and context of a decision activity. The DecisionEvent captures information about how the decision made, when it was occurring, what options were proposed (chosen) and what contextual state existed that either influenced the decision or could be observed during the decision process. The decision event also captures the proposition ID, a globally unique identifier that can be used to correlate the decision to other events. DecisionEvents are not only relatable to Experience Events that impacted a decision but also to ExperienceEvents that are a direct response to a proposition. It is the expectation that applications reference the proposition ID in every experience event that was influended by the propositions. A user profile's proposition-response history is maintained with these proposition IDs.",
  "meta:abstract": false,
  "meta:extensible": true,
  "meta:extends": [
    "https://ns.adobe.com/xdm/data/time-series",

    "https://ns.adobe.com/experience/decisioning/proposition#/definitions/propositions-mixin",

    "https://ns.adobe.com/xdm/context/identitymap",
    "https://ns.adobe.com/xdm/context/experienceevent-advertising",
    "https://ns.adobe.com/xdm/context/experienceevent-application",
    "https://ns.adobe.com/xdm/context/experienceevent-channel",
    "https://ns.adobe.com/xdm/context/experienceevent-commerce",
    "https://ns.adobe.com/xdm/context/experienceevent-directmarketing",
    "https://ns.adobe.com/xdm/context/experienceevent-environment-details",
    "https://ns.adobe.com/xdm/context/experienceevent-marketing",
    "https://ns.adobe.com/xdm/context/experienceevent-media",
    "https://ns.adobe.com/xdm/context/experienceevent-search",
    "https://ns.adobe.com/xdm/context/experienceevent-segmentmembership",
    "https://ns.adobe.com/xdm/context/experienceevent-web"
  ],
  "definitions": {
    "decisionevent": {
      "properties": {
        "https://ns.adobe.com/adobecloudplatform/ims/organizationId": {
          "title": "IMS Org ID",
          "type": "string",
          "description": "An ID associated with the orgnaization that maintains the library of business objects and rules for this decision."
        },
        "https://ns.adobe.com/experience/decisioning/containerId": {
          "title": "Container ID",
          "type": "string",
          "description": "An ID associated with the library of business objects and rules for this decision."
        },
        "https://ns.adobe.com/experience/decisioning/batchId": {
          "title": "Batch ID",
          "type": "string",
          "description": "An ID associated with the decision event, if the request was made in batch mode. This propoerty will be absent if the decision leading to this event was made individually for a single profile identity."
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "https://ns.adobe.com/xdm/common/extensible#/definitions/@context"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/data/time-series"
    },
    {
      "$ref": "#/definitions/decisionevent"
    },
    {
      "$ref": "https://ns.adobe.com/experience/decisioning/proposition#/definitions/propositions-mixin"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/identitymap"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-advertising"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-application"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-channel"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-commerce"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-directmarketing"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-environment-details"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-marketing"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-media"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-search"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-segmentmembership"
    },
    {
      "$ref": "https://ns.adobe.com/xdm/context/experienceevent-web"
    },
    {
      "required": [
        "@id",
        "xdm:timestamp",
        "xdm:identityMap",
        "https://ns.adobe.com/experience/decisioning/propositionId"
      ]
    },
    {
      "properties": { "@id": { "readonly": true } }
    }
  ],
  "meta:status": "experimental"
}
